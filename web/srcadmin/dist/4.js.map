{"version":3,"sources":["webpack:///./src/ui/DetailField.vue?6f10","webpack:///./src/ui/DetailField.vue?050a","webpack:///src/ui/DetailField.vue","webpack:///./src/ui/DetailField.vue","webpack:///./src/ui/Detail.vue?101b","webpack:///./src/ui/Detail.vue?eb94","webpack:///src/ui/Detail.vue","webpack:///./src/ui/Detail.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","tag","attrs","field","props","label","model","value","callback","$$v","$set","expression","staticClass","on","back","_v","class","isSuccess","isError","domProps","_s","alertMessage","_e","_m","additionalComponents","item","id","_l","tab","_t","index","key","formData","additionalIndex","type","dataComponent","dataIndex","$event","deleteAdditionalData","inDataComponent","staticStyle","addAdditionalData","initialConfig","save","apply","deleteItem"],"mappings":"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","file":"4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c(_vm.component.component,{tag:\"component\",attrs:{\"field\":_vm.component.field,\"props\":_vm.component.props,\"label\":_vm.component.label},model:{value:(_vm.component.value),callback:function ($$v) {_vm.$set(_vm.component, \"value\", $$v)},expression:\"component.value\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailField.vue?vue&type=script&lang=js&\"","<template>\r\n    <div>\r\n        <component\r\n                :is=\"component.component\"\r\n                :field=\"component.field\"\r\n                :props=\"component.props\"\r\n                :label=\"component.label\"\r\n                v-model=\"component.value\"\r\n        ></component>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"DetailField\",\r\n        props: ['component'],\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render, staticRenderFns } from \"./DetailField.vue?vue&type=template&id=5fef3ade&scoped=true&\"\nimport script from \"./DetailField.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fef3ade\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('button',{staticClass:\"btn btn-default\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"fa fa-arrow-left\"}),_vm._v(\"\\n            Назад\\n        \")])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),(_vm.alertMessage)?_c('div',{class:{'alert': 1, 'alert-success': _vm.isSuccess, 'alert-danger': _vm.isError}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.alertMessage)}})]):_vm._e(),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('ul',{staticClass:\"nav nav-tabs\"},[_vm._m(0),_vm._v(\" \"),(_vm.additionalComponents && _vm.item.id)?_vm._l((_vm.additionalComponents),function(component){return _c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"data-toggle\":\"tab\",\"href\":'#'+component.tab}},[_vm._v(_vm._s(component.tab))])])}):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"tab-content\"},[_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('div',{staticClass:\"tab-pane fade active in\",attrs:{\"id\":\"description\"}},[_c('div',{staticClass:\"form\"},[_vm._t(\"default\",[_vm._l((_vm.formData),function(component,index){return [_c('div',{staticClass:\"form-row\"},[_c('detail-field',{key:'main_data_field'+index,attrs:{\"component\":component}})],1)]})],{\"default\":_vm.formData})],2)]),_vm._v(\" \"),(_vm.additionalComponents && _vm.item.id)?_vm._l((_vm.additionalComponents),function(component,additionalIndex){return _c('div',{staticClass:\"tab-pane fade\",attrs:{\"id\":component.tab}},[(component.type !== 'one.to.one')?_c('div',[_vm._l((component.dataConfig),function(dataComponent,dataIndex){return _c('div',[_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteAdditionalData(additionalIndex, dataIndex)}}},[_vm._v(\"Удалить\")]),_vm._v(\" \"),_vm._l((dataComponent),function(inDataComponent,index){return [_c('div',{staticClass:\"form-row\"},[_c('detail-field',{key:'data_component'+index,attrs:{\"component\":inDataComponent}})],1)]})],2)}),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addAdditionalData(additionalIndex, component.initialConfig)}}},[_vm._v(\"Добавить\")])],2):_c('div',_vm._l((component.dataConfig),function(dataComponent){return _c('div',[_vm._l((dataComponent),function(inDataComponent,index){return [_c('div',{staticClass:\"form-row\"},[_c('detail-field',{key:'data_component'+index,attrs:{\"component\":inDataComponent}})],1)]})],2)}),0)])}):_vm._e()],2),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('div',[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.save}},[_c('i',{staticClass:\"fa fa-save\"}),_vm._v(\"\\n            Сохранить\\n        \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.apply}},[_vm._v(\"\\n            Применить\\n        \")]),_vm._v(\" \"),(this.id)?_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":_vm.deleteItem}},[_vm._v(\"\\n            Удалить\\n        \")]):_vm._e()]),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('p',[_vm._v(\" \")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"nav-item active\"},[_c('a',{staticClass:\"nav-link active\",attrs:{\"data-toggle\":\"tab\",\"href\":\"#description\"}},[_vm._v(\"Основное\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","<template>\r\n    <div>\r\n        <div>\r\n            <button @click=\"back\" class=\"btn btn-default\">\r\n                <i class=\"fa fa-arrow-left\"></i>\r\n                Назад\r\n            </button>\r\n        </div>\r\n\r\n        <hr>\r\n\r\n        <div v-if=\"alertMessage\" :class=\"{'alert': 1, 'alert-success': isSuccess, 'alert-danger': isError}\">\r\n            <div v-html=\"alertMessage\"></div>\r\n        </div>\r\n\r\n        <p>&nbsp;</p>\r\n\r\n        <ul class=\"nav nav-tabs\">\r\n            <li class=\"nav-item active\">\r\n                <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#description\">Основное</a>\r\n            </li>\r\n            <template v-if=\"additionalComponents && item.id\">\r\n                <li v-for=\"component in additionalComponents\" class=\"nav-item\">\r\n                    <a class=\"nav-link\" data-toggle=\"tab\" :href=\"'#'+component.tab\">{{ component.tab }}</a>\r\n                </li>\r\n            </template>\r\n        </ul>\r\n\r\n        <div class=\"tab-content\">\r\n            <p>&nbsp;</p>\r\n\r\n            <div class=\"tab-pane fade active in\" id=\"description\">\r\n                <div class=\"form\">\r\n                    <slot v-bind:default=\"formData\">\r\n                        <template v-for=\"(component, index) in formData\">\r\n                            <div class=\"form-row\">\r\n                                <detail-field\r\n                                        :key=\"'main_data_field'+index\"\r\n                                        :component=\"component\"\r\n                                >\r\n                                </detail-field>\r\n                            </div>\r\n                        </template>\r\n                    </slot>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <template v-if=\"additionalComponents && item.id\">\r\n                <div v-for=\"(component, additionalIndex) in additionalComponents\" class=\"tab-pane fade\" :id=\"component.tab\">\r\n                    <div v-if=\"component.type !== 'one.to.one'\">\r\n\r\n                        <div v-for=\"(dataComponent, dataIndex) in component.dataConfig\">\r\n                            <p>&nbsp;</p>\r\n                            <button @click=\"deleteAdditionalData(additionalIndex, dataIndex)\" type=\"button\" class=\"btn btn-danger\">Удалить</button>\r\n                            <template v-for=\"(inDataComponent, index) in dataComponent\">\r\n                                <div class=\"form-row\">\r\n                                    <detail-field\r\n                                            :key=\"'data_component'+index\"\r\n                                            :component=\"inDataComponent\"\r\n                                    >\r\n                                    </detail-field>\r\n                                </div>\r\n                            </template>\r\n                        </div>\r\n                        <hr>\r\n                        <button @click=\"addAdditionalData(additionalIndex, component.initialConfig)\" type=\"button\" class=\"btn btn-primary\" style=\"margin-top: 10px;\">Добавить</button>\r\n\r\n                    </div>\r\n                    <div v-else>\r\n                        <div v-for=\"dataComponent in component.dataConfig\">\r\n                            <template v-for=\"(inDataComponent, index) in dataComponent\">\r\n                                <div class=\"form-row\">\r\n                                    <detail-field\r\n                                            :key=\"'data_component'+index\"\r\n                                            :component=\"inDataComponent\"\r\n                                    >\r\n                                    </detail-field>\r\n                                </div>\r\n                            </template>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </div>\r\n\r\n\r\n        <p>&nbsp;</p>\r\n        <p>&nbsp;</p>\r\n        <div>\r\n            <button @click=\"save\" class=\"btn btn-success\">\r\n                <i class=\"fa fa-save\"></i>\r\n                Сохранить\r\n            </button>\r\n            <button @click=\"apply\" class=\"btn btn-primary\">\r\n                Применить\r\n            </button>\r\n            <button v-if=\"this.id\" @click=\"deleteItem\" class=\"btn btn-danger\">\r\n                Удалить\r\n            </button>\r\n        </div>\r\n\r\n        <p>&nbsp;</p>\r\n        <p>&nbsp;</p>\r\n        <p>&nbsp;</p>\r\n        <p>&nbsp;</p>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {clone, cloneDeep, each} from 'lodash';\r\n    import DetailField from './DetailField';\r\n\r\n    export default {\r\n        name: \"Detail\",\r\n        props: {\r\n            id: [String, Number],\r\n            defaultFormData: Object,\r\n            saveUrl: String,\r\n            detailComponents: Array,\r\n            additionalComponents: Array,\r\n            component: this,\r\n            item: Object\r\n        },\r\n        components: {\r\n            DetailField,\r\n        },\r\n        created() {\r\n            each(this.detailComponents, (element) => {\r\n                this.formData[element.field] = element;\r\n            });\r\n            this.$forceUpdate();\r\n        },\r\n        computed: {\r\n            componentsIndex() {\r\n                let result = {};\r\n                each(this.detailComponents, (item) => {\r\n                    result[item.field] = item;\r\n                });\r\n\r\n                return result;\r\n            },\r\n            listUrl() {\r\n                return this.saveUrl.replace('detail', 'list');\r\n            },\r\n            deleteUrl() {\r\n                return this.saveUrl.replace('detail', 'delete');\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                isSuccess: false,\r\n                isError: false,\r\n                alertMessage: '',\r\n                formData: {}\r\n            }\r\n        },\r\n        methods: {\r\n            checkInput() {\r\n                console.log('input');\r\n            },\r\n            back() {\r\n                location.href=this.listUrl+'?list=on';\r\n            },\r\n            save() {\r\n                this.uploadToServer(() => {\r\n                    this.back();\r\n                });\r\n            },\r\n            apply() {\r\n                this.uploadToServer();\r\n            },\r\n            processError(errors) {\r\n                let message = '';\r\n                each(errors, (error) => {\r\n                    message += error+\"<br>\";\r\n                });\r\n                this.alert(message, 'error');\r\n                $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\r\n            },\r\n            deleteItem() {\r\n                if (!confirm('Вы уверены?')) {\r\n                    return;\r\n                }\r\n\r\n                this.$root.startProgress();\r\n                $.ajax({\r\n                    method: 'POST',\r\n                    url: this.saveUrl,\r\n                    data: {\r\n                        id: this.id,\r\n                        delete: true\r\n                    }\r\n                }).done((response) => {\r\n                    if (response.result) {\r\n                        this.back();\r\n                    } else {\r\n                        this.alert('Ошибка удаления', 'error');\r\n                    }\r\n                    this.$root.stopProgress();\r\n                }).fail(() => {\r\n\r\n                    this.$root.stopProgress();\r\n                });\r\n            },\r\n            alert(message, type) {\r\n                this.isError = false;\r\n                this.isSuccess = false;\r\n\r\n                if (type === 'success') {\r\n                    this.isSuccess = true;\r\n                } else {\r\n                    this.isError = true;\r\n                }\r\n\r\n                this.alertMessage = message;\r\n                this.$forceUpdate();\r\n            },\r\n            addAdditionalData(additionalIndex, data) {\r\n                this.additionalComponents[additionalIndex]['dataConfig'].push(cloneDeep(data));\r\n                this.$forceUpdate();\r\n            },\r\n            deleteAdditionalData(additionalIndex, dataIndex) {\r\n                this.additionalComponents[additionalIndex]['dataConfig'].splice(dataIndex, 1);\r\n                this.$forceUpdate();\r\n            },\r\n            appendAdditionalData(serverData) {\r\n                var additionalServerData = {};\r\n                each(this.additionalComponents, (item) => {\r\n                    if (!additionalServerData[item.relationClass]) {\r\n                        additionalServerData[item.relationClass] = [];\r\n                    }\r\n                    each(item.dataConfig, (dataItem) => {\r\n                        var serverItem = {};\r\n\r\n                        each(dataItem, (fieldItem) => {\r\n                            serverItem[fieldItem.field] = fieldItem.value;\r\n                        });\r\n\r\n                        additionalServerData[item.relationClass].push(serverItem);\r\n                    });\r\n                });\r\n\r\n                serverData.secondary_form = additionalServerData;\r\n\r\n                return serverData;\r\n            },\r\n            uploadToServer(afterSuccess) {\r\n                this.$root.startProgress();\r\n                var serverData = {};\r\n                if (this.id) {\r\n                    serverData.id = this.id;\r\n                }\r\n                each(this.formData, (item) => {\r\n                    serverData[item.field] = item.value;\r\n                });\r\n                each(this.defaultFormData, (item, fieldName) => {\r\n                    serverData[fieldName] = item\r\n                });\r\n\r\n                if (this.item.id) {\r\n                    serverData = this.appendAdditionalData(serverData);\r\n                }\r\n\r\n                $.ajax({\r\n                    method: 'POST',\r\n                    url: this.saveUrl,\r\n                    data: serverData\r\n                }).done((response) => {\r\n                    if (!response.result) {\r\n                        this.processError(response.errors);\r\n                    } else {\r\n                        if (afterSuccess) {\r\n                            afterSuccess();\r\n                        } else {\r\n                            location.href = this.saveUrl + '?id='+response.model.id;\r\n                        }\r\n                    }\r\n                    this.$root.stopProgress();\r\n                }).fail(() => {\r\n\r\n                    this.$root.stopProgress();\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=24eb79fd&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24eb79fd\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}